'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _github = require('github');

var _github2 = _interopRequireDefault(_github);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class GitHub {
  constructor(authToken, requireAuth) {
    if (authToken) {
      this.token = authToken;
    } else if (process.env.GITHUB_TOKEN) {
      this.token = process.env.GITHUB_TOKEN;
    } else if (requireAuth) {
      throw 'Please set GITHUB_TOKEN in your environment to access these features';
    }
  }

  getGitHub() {
    const github = new _github2.default({
      protocol: 'https',
      headers: {
        'user-agent': 'Electron Forge'
      }
    });
    if (this.token) {
      github.authenticate({
        type: 'token',
        token: this.token
      });
    }
    return github;
  }
}
exports.default = GitHub;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwvZ2l0aHViLmpzIl0sIm5hbWVzIjpbIkdpdEh1YiIsImNvbnN0cnVjdG9yIiwiYXV0aFRva2VuIiwicmVxdWlyZUF1dGgiLCJ0b2tlbiIsInByb2Nlc3MiLCJlbnYiLCJHSVRIVUJfVE9LRU4iLCJnZXRHaXRIdWIiLCJnaXRodWIiLCJwcm90b2NvbCIsImhlYWRlcnMiLCJhdXRoZW50aWNhdGUiLCJ0eXBlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O0FBRWUsTUFBTUEsTUFBTixDQUFhO0FBQzFCQyxjQUFZQyxTQUFaLEVBQXVCQyxXQUF2QixFQUFvQztBQUNsQyxRQUFJRCxTQUFKLEVBQWU7QUFDYixXQUFLRSxLQUFMLEdBQWFGLFNBQWI7QUFDRCxLQUZELE1BRU8sSUFBSUcsUUFBUUMsR0FBUixDQUFZQyxZQUFoQixFQUE4QjtBQUNuQyxXQUFLSCxLQUFMLEdBQWFDLFFBQVFDLEdBQVIsQ0FBWUMsWUFBekI7QUFDRCxLQUZNLE1BRUEsSUFBSUosV0FBSixFQUFpQjtBQUN0QixZQUFNLHNFQUFOO0FBQ0Q7QUFDRjs7QUFFREssY0FBWTtBQUNWLFVBQU1DLFNBQVMscUJBQWM7QUFDM0JDLGdCQUFVLE9BRGlCO0FBRTNCQyxlQUFTO0FBQ1Asc0JBQWM7QUFEUDtBQUZrQixLQUFkLENBQWY7QUFNQSxRQUFJLEtBQUtQLEtBQVQsRUFBZ0I7QUFDZEssYUFBT0csWUFBUCxDQUFvQjtBQUNsQkMsY0FBTSxPQURZO0FBRWxCVCxlQUFPLEtBQUtBO0FBRk0sT0FBcEI7QUFJRDtBQUNELFdBQU9LLE1BQVA7QUFDRDtBQXpCeUI7a0JBQVBULE0iLCJmaWxlIjoidXRpbC9naXRodWIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2l0SHViQVBJIGZyb20gJ2dpdGh1Yic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdpdEh1YiB7XG4gIGNvbnN0cnVjdG9yKGF1dGhUb2tlbiwgcmVxdWlyZUF1dGgpIHtcbiAgICBpZiAoYXV0aFRva2VuKSB7XG4gICAgICB0aGlzLnRva2VuID0gYXV0aFRva2VuO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuR0lUSFVCX1RPS0VOKSB7XG4gICAgICB0aGlzLnRva2VuID0gcHJvY2Vzcy5lbnYuR0lUSFVCX1RPS0VOO1xuICAgIH0gZWxzZSBpZiAocmVxdWlyZUF1dGgpIHtcbiAgICAgIHRocm93ICdQbGVhc2Ugc2V0IEdJVEhVQl9UT0tFTiBpbiB5b3VyIGVudmlyb25tZW50IHRvIGFjY2VzcyB0aGVzZSBmZWF0dXJlcyc7XG4gICAgfVxuICB9XG5cbiAgZ2V0R2l0SHViKCkge1xuICAgIGNvbnN0IGdpdGh1YiA9IG5ldyBHaXRIdWJBUEkoe1xuICAgICAgcHJvdG9jb2w6ICdodHRwcycsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICd1c2VyLWFnZW50JzogJ0VsZWN0cm9uIEZvcmdlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgIGdpdGh1Yi5hdXRoZW50aWNhdGUoe1xuICAgICAgICB0eXBlOiAndG9rZW4nLFxuICAgICAgICB0b2tlbjogdGhpcy50b2tlbixcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZ2l0aHViO1xuICB9XG59XG4iXX0=